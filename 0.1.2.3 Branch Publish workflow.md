---

# **0.1.2.2 Branch Publish Workflow — Birha Project**

### **Purpose**

This document defines the standardized Git workflow for developing, publishing, reviewing, and merging additive-only feature branches within the **Birha** software ecosystem — including all Axioms/Framework modules and related enhancements.

---

## **0️⃣ Pre-Branch Setup**

Before starting any new task:

```bash
git checkout main
git fetch origin
git pull origin main
```

This ensures your local main is synchronized with the latest merged code.

---

## **1️⃣ Create a New Branch**

Branch names follow the format:

```bash
git checkout -b task/<task-id-or-feature-name>
```

**Examples:**

* `task/t4-axioms-prompt-builder`
* `task/t5-axioms-draft-persistence`

Each branch corresponds to a task in the **Engineering Contract** (e.g., T0, T1, T2…).

---

## **2️⃣ Stage and Commit Changes**

Use clear, imperative commit messages:

```bash
git status
git add <files>              # or: git add .
git commit -m "feat(scope): concise summary"
```

**Examples:**

* `feat(axioms): T4 prompt builder preview (additive UI)`
* `fix(axioms): prevent TclError on disabled Text.delete`

---

## **3️⃣ Publish the Branch**

For first-time push:

```bash
# Update remote if repo moved
git remote set-url origin git@github.com:vije1711/Birha.git

git push --set-upstream origin task/<branch-name>
```

Subsequent pushes require only:

```bash
git push
```

---

## **4️⃣ Draft the PR Body**

Create or update a file named **`pr_body.md`** with this template:

```bash
nano pr_body.md
```

### **Template**

```markdown
## Summary
Describe what this task implements and why.

## Scope & Behavior
- High-level overview of new UI or backend behavior.
- Note any mock placeholders or next-phase dependencies.

## How to Verify
1. Step-by-step flow for manual QA.
2. Expected visible outputs or prompts.

## Implementation Notes
- Code placed under `# === Axioms T<n>: <Task Name> (additive only) ===`.
- Uses additive wrappers; no modifications to pre-Axiom logic.

## Risks & Mitigations
- Known environment constraints (e.g., headless CI, missing clipboard).
- Fallback behaviors included.

## Compliance
- Additive-only policy upheld.
- `1.1.0_birha_pre_Axiom.py` remains read-only reference.
```

To save from terminal:

```bash
cat <<'EOF' > pr_body.md
# (Paste your filled template content here)
EOF
```

---

## **5️⃣ Create the Pull Request**

Once the branch is ready and committed:

```bash
gh pr create \
  --base main \
  --head task/<branch-name> \
  --title "[Axioms T<n>] <Short Description>" \
  --body-file pr_body.md
```

**Example:**

```bash
gh pr create \
  --base main \
  --head task/t4-axioms-prompt-builder \
  --title "[Axioms T4] Add Prompt Builder Preview (additive UI with copy/save draft)" \
  --body-file pr_body.md
```

If GitHub CLI shows:

> “Warning: 1 uncommitted change”

You can safely ignore it (the CLI uses your current file)
or commit it explicitly:

```bash
git add pr_body.md
git commit -m "docs: PR body for T<n>"
git push
```

---

## **6️⃣ Review & Update PR**

When you make fixes or enhancements:

```bash
git add <files>
git commit -m "chore: address review feedback"
git push
```

If you amended commits, use:

```bash
git push --force-with-lease
```

(Only if required to replace the last commit safely.)

---

## **7️⃣ Merge & Sync Back**

After PR approval and merge:

```bash
git checkout main
git pull origin main
```

Optionally delete the merged branch:

```bash
git branch -d task/<branch-name>            # local
git push origin --delete task/<branch-name> # remote
```

Verify your sync:

```bash
git log --oneline -5
```

You should see your latest merged commit on top of `main`.

---

## **8️⃣ Quick Health Check**

Run before pushing any PR:

```bash
python -m py_compile 1.1.0_birha.py
```

Ensures syntax correctness and validates additive block structure.

---

## **9️⃣ One-Page Checklist**

✅ Pull latest main before branching
✅ Use proper branch name (`task/...`)
✅ Additive-only commits under Axioms headers
✅ Commit → Push → PR → Review → Merge → Pull
✅ Delete local/remote branches after merge
✅ Keep `1.1.0_birha_pre_Axiom.py` untouched

---

## **10️⃣ Optional Utilities**

| OS                 | Command to copy current branch name          |
| ------------------ | -------------------------------------------- |
| Linux (Wayland)    | `git branch --show-current \| wl-copy`       |
| macOS              | `git branch --show-current \| pbcopy`        |
| Windows PowerShell | `git branch --show-current \| Set-Clipboard` |

---

### **End of Document**

All contributors must follow this workflow to maintain the additive integrity of the Birha codebase and preserve backward compatibility with `1.1.0_birha_pre_Axiom.py`.

---