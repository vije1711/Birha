Non-negotiable constraint
Do not alter any existing functions in 1.1.0_birha.py. Treat them as read-only reference.
You may only add new functions, dataclasses, constants, and unit tests.
No renames, no signature changes, no in-place edits, no deleted lines in existing code.

# Full prompt (thorough)

**Scope**
Implement **T3. Axiom Workbench (UI Shell)** per the engineering contract: a dedicated, additive window to review per-verse flags, computed category, links, and contributions, with actions to create/link axioms. No rewiring of existing flows. 

**Non-negotiables (repeat):**

* **Do not alter any existing functions or strings** in `1.1.0_birha.py`. Treat current code as read-only.
* No renames, signature changes, in-place edits, or deletions.
* **Keep canonical Punjabi headers** as-is; do not change `_resolve_col()`/`col()` or related constants.
* All additions must be under a new section header.

**Files**

* Code: append to `1.1.0_birha.py` under:
  `# === Axioms T3: Workbench UI Shell (additive only) ===`
* Tests: `tests/axioms/test_task3_workbench.py`

**What to build (additive classes + public launchers)**

1. **UI class**
   `class AxiomsWorkbench(tk.Toplevel):`

* Pure **shell** (no takeover): creates a toplevel window with these regions:

  * Header: “Axioms (beta)” + verse selector (Combobox) + status line.
  * Flags panel: checkboxes for `Framework?`, `Explicit?`; computed **Category badge** using T1 `derive_axiom_category()`.
  * Axioms panel:

    * Search box + results (listbox or tree) backed by T2 `AxiomsStore.find_axioms(query)`.
    * Buttons: **Create Axiom**, **Link Selected**, **View Linked**.
  * Linked contributions (read-only list for now) via T2 `AxiomContribStore.list_contributions(verse_key=...)`.
  * Footer: Close button.
* Layout should be resilient (pack/grid), with wraplength adjustments like existing UI components.
* **No modal blocking**; window is independent and can be opened/closed freely.

2. **Public launchers (no changes to existing methods)**
   Add **new** functions only:

```python
def open_axioms_workbench_from_dashboard(app: "GrammarApp") -> None:
    """Open Workbench without verse preselected; verse selector enabled."""

def open_axioms_workbench_for_verse(app: "GrammarApp", verse_text: str | None = None, verse_key: str | None = None) -> None:
    """Open Workbench with a specific verse context (prepopulates selector, flags if available)."""
```

* These must **not** modify existing `GrammarApp` members; they can **read** from public state if available, but must not rely on it.
* Both functions create `AxiomsWorkbench(app.root)` and pass context via constructor kwargs or setter.

3. **Verse selector model**

* If verse context is supplied: set selector to that single verse; otherwise allow manual selection via an entry field (verse text) + a derived `verse_key` (`_normalize_verse_key` helper is available).
* Show computed **Category** immediately when flags are toggled (no persistence yet).

4. **Data adapters (re-use T2)**

* Use `AxiomsStore`, `AxiomContribStore` to **read** catalog & contributions.
* For T3 **shell**, writes are minimal:

  * **Create Axiom** → `AxiomsStore.create_axiom(law_text)` then refresh list.
  * **Link Selected** → `AxiomContribStore.link_contribution(axiom_id, verse_key, category, notes="")` (category from current flags).
* No schema changes; column order remains the same as T2. 

5. **Flag state handling**

* Don’t persist `Framework?`/`Explicit?` to assessment in T3; the workbench just holds **current working values** in memory and uses T1’s `derive_axiom_category()` for the badge. (Persistence to assessment/Excel belongs to later tasks.) 

6. **Additive hooks (optional, safe)**

* Provide an **optional** helper `register_axioms_workbench_menu(root)` that **adds a new top-level menu** (“Axioms → Open Workbench”) to the root window **without editing existing functions**. This must only be called manually by the maintainer later; do **not** call it automatically.

**Acceptance Criteria (show evidence in PR)**

* A new `AxiomsWorkbench` window class exists and renders (headless smoke test creates/destroys without errors).
* `open_axioms_workbench_from_dashboard(...)` opens the window with no verse preselected; `open_axioms_workbench_for_verse(...)` opens it with verse context applied.
* Flags `Framework?` & `Explicit?` are editable in the shell; category badge updates live using `derive_axiom_category()`. (T1 mapping: `(True,True)→Primary`, `(True,False)→Secondary`.) 
* Axiom search returns results via `AxiomsStore.find_axioms`; **Create Axiom** inserts a new record; **Link Selected** writes one contribution row; both refresh the lists.
* No changes to existing functions/strings/constants; diff shows only appended code.
* Tests pass locally (see below).

**Tests (pytest), `tests/axioms/test_task3_workbench.py`**

* **Headless smoke:** create a root (`tk.Tk()`), instantiate `AxiomsWorkbench(root)`, then `destroy()`; assert no exceptions.
* **Category logic:** param test calling `derive_axiom_category()` from T1; verify badge text produced by the UI helper matches mapping.
* **Stores round-trip (reuse T2 temp file):** create temp `1.3.0_axioms.xlsx`, create axiom via store, call workbench search method (non-GUI helper), link contribution for a dummy `verse_key`, assert contribution exists.
* **No-touch guard:** assert that **no existing function names** are modified by checking a list of known entry points (import and inspect source or use a regex check).

**UI copy (minimal):**

* Window title: “Axioms (beta) — Workbench”
* Buttons: “Create Axiom”, “Link Selected”, “View Linked”, “Close”
* Flags: “Framework?”, “Explicit?”, Category badge: “Category: Primary/Secondary/None”

**PR workflow**

* Branch: `feature/axioms-T3-workbench-shell`
* Commit: `feat(axioms): T3 add AxiomsWorkbench UI shell + public launchers (additive only)`
* PR: `Axioms T3 — Workbench UI Shell (additive, uses T1/T2)`
* Include screenshots or a short GIF of the window (optional) and this checklist:

  * [ ] No edits to existing functions/strings/constants (diff = appended section only)
  * [ ] Workbench opens via both public launchers
  * [ ] Flags editable; category badge updates via T1
  * [ ] Axiom search/create/link uses T2 stores and refreshes UI
  * [ ] Headless tests green; lints pass

---

