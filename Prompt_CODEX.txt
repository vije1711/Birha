Non-negotiable constraint
Do not alter any existing functions in 1.1.0_birha.py. Treat them as read-only reference.
You may only add new functions, dataclasses, constants, and unit tests.
No renames, no signature changes, no in-place edits, no deleted lines in existing code.

---

# Full Prompt (Thorough) – Task 13

**Context**
You are enhancing *Birha v1.1.0* (Tkinter app). The sources of truth are **@Prompt_CODEX.txt** and **@0.1.7.3 Axioms_framework Engineering Contract — Birha V1.1.docx**. Implement **Task 13 only**: Final Integration & Regression Guardrails, ensuring that the Axioms/Framework feature coexists cleanly with the existing Literal Translation and Grammar flows, without regressions. 

---

**Non-negotiables**

* Do **not** alter any existing functions, constants, or strings in `1.1.0_birha.py`. Treat them as read-only reference.
* No renames, refactors, in-place edits, or deletions.
* Add all new code only under this header:
  `# === Axioms T13: Final Integration & Regression Guardrails (additive only) ===`
* Canonical headers and string constants must remain untouched.

---

**Deliverables**

1. **Smoke Tests & Guardrails**

   * Create smoke tests covering coexistence with existing Literal Translation and Grammar flows.
   * Ensure that when saving verses, **existing save behavior remains unchanged** unless the user explicitly interacts with Axioms features.
   * Verify that Grammar assessments, Literal translations, and Verse data persistence are unaffected by Axioms flows.

2. **UI Integration**

   * Ensure launching the Axioms workbench from the dashboard or post-save panel does not alter any state until the user confirms “Save/Finalize Axioms.”
   * Add non-blocking hooks so the “Finalize Axioms” panel launches after Literal Translation/Grammar save, but remains optional.
   * Verify that Axioms dialogs close gracefully without side-effects.

3. **Stress & Edge Cases**

   * Validate that large verses (>300 characters) and multi-verse selections behave consistently, without errors or regressions.
   * Confirm that Axioms features handle edge cases like missing Framework?/Explicit? flags gracefully.
   * Ensure reanalysis triggers still work correctly if translation revisions advance.

4. **Regression Checklist**

   * Literal Translation saves produce identical data before/after Axioms code.
   * Grammar saves and highlights are unaffected.
   * No schema drift in existing CSV/Excel outputs.
   * ABW driver behavior remains consistent with pre-Axioms functionality.

---

**Acceptance Criteria**

* Existing save behaviors (Literal/Grammar) are preserved exactly.
* Launching Axioms workbench has no side-effects until user finalizes.
* Large verse and multi-verse selections process correctly.
* Reanalysis queue continues to function as before.
* End-to-end flow works: Verse → Finalize Literal/Grammar → Launch Axioms → Save/Finalize → Export → Re-import → Re-run tests.
* All unit and smoke tests pass.

---

**Tests**
File: `tests/axioms/test_task13_integration.py`

* `test_literal_translation_unchanged()` → saving translation behaves identically pre/post Axioms.
* `test_grammar_flow_unchanged()` → grammar assessments unaffected.
* `test_axioms_workbench_launch_no_side_effects()` → opening/closing without saving leaves state untouched.
* `test_large_verse_and_multiverse_selection()` → edge cases work consistently.
* `test_axioms_save_with_translation_revision()` → reanalysis triggers when revisions advance.

---

**PR Workflow**

* Branch: `feature/axioms-T13-final-integration`
* Commit: `feat(axioms): T13 add final integration & regression guardrails`
* PR Title: `Axioms T13 — Final Integration & Regression Guardrails`
* PR Body Checklist:

  * [ ] Additive only, no edits to existing functions/constants
  * [ ] Existing Literal/Grammar flows unchanged
  * [ ] Axioms workbench optional, no side-effects
  * [ ] Edge cases validated (large/multi-verse)
  * [ ] All smoke tests and unit tests green

---
